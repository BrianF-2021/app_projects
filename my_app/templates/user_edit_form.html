<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Home</title>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/top_bar.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/styles.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/navbar.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/user_edit.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/delete_acct_popup.css') }}">

    <script type="text/javascript" src="{{ url_for('static', filename = 'script/navbar.js') }}" defer></script>


    <script type="text/javascript" src="{{ url_for('static', filename = 'script/confirm_delete.js') }}" defer></script>
    <!-- <script src="/static/script/javascript.js" defer></script> -->

</head>
<body class="bg-image full_body">
    <div class="top_bar">

        <nav class="navbar">
            <div class="nav-title">EDIT PROFILE</div>
            <div class="toggle-button">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <div class="navbar-links">
                <ul>
                    <li><a class="links" href="/user_local_weather">Home</a></li>
                    <li><a class="links" href="/logout">Logout</a></li>
                </ul>
            </div>
        </nav>
        <!-- <div class="wx_search_bar">
            <form action="/local_weather/{{this_user.id}}" method="POST">
                <div class="city_state_search">
                    <label for="city_state">Local Weather: </label>
                    <input type="text" name = "city_state" placeholder="City State">
                </div>
                <input class="wx-submit-btn"  type="submit" value = "Submit">
            </form>
        </div> -->

      </div>


    <div class="main_body">
        <div id="delete_account" class="data_box">
            <div class = "d-flex flex-row p-1">

                <div class = "profile_data">
                    <h1>{{ this_user.first_name }} {{ this_user.last_name }}</h1>

                    <div>
                        <h5>ID:</h5>
                        <p>{{ this_user.id }}</p>
                    </div>
                    <div>
                        <h5>Name:</h5>
                        <p>{{ this_user.first_name }} {{ this_user.last_name }}</p>
                    </div>
                    <div>
                        <h5>Email:</h5>
                        <p>{{ this_user.email }}</p>
                    </div>
                    <div>
                        <h5>City:</h5>
                        {% if this_user.city %}
                             <p>{{ this_user.city }}</p>
                        {% else %}
                            <p class="text-warning"> NO SET CITY</p>
                        {% endif %}
                    </div>
                    <div>
                        <h5>State:</h5>
                        {% if this_user.state %}
                             <p>{{ this_user.state }}</p>
                        {% else %}
                            <p class="text-warning"> NO SET STATE</p>
                        {% endif %}
                    </div>
                    <div>
                        <h5>Created On:</h5>
                        <p>{{ this_user.created_at }}</p>
                    </div>
                    <div>
                        <h5>Last Updated On:</h5>
                        <p>{{ this_user.updated_at }}</p>
                    </div>
                </div>


                <div class = "d-flex flex-column w-50">
                    <h1 class="text-center border-bottom">Edit Your Profile</h1>
                    {% with messages = get_flashed_messages() %}
                    {% if messages %}
                        <div class="message_box">
                            {% for message in messages %}
                                <p>{{message}}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {% endwith %}
                    <form id="user-form" action="/user/editing/{{this_user.id}}" method = "POST">

                        <div class = "d-flex flex-column mb-3 mt-3">
                            <label for="first_name">First Name: </label>
                            <input class="input_box" type="text" name = "first_name" value="{{this_user.first_name}}" >
                        </div>

                        <div class = "d-flex flex-column mb-3 mt-3">
                            <label for="last_name">Last Name: </label>
                            <input class="input_box" type="text" name = "last_name" value="{{this_user.last_name}}">
                        </div>

                        <div class = "d-flex flex-column mb-3 mt-3">
                            <label for="email">Email: </label>
                            <input class="input_box" type="text" name = "email" value="{{this_user.email}}" required>
                        </div>

                        <div class = "d-flex flex-column mb-3 mt-3">
                            <label for="city">City: </label>
                            <input class="input_box" type="text" name = "city" value="{{this_user.city}}">
                        </div>

                        <div class = "d-flex flex-column mb-3 mt-3">
                            <label for="state">State: </label>
                            <input class="input_box" type="text" name = "state" value="{{this_user.state}}">
                        </div>
                        <div class="buttons_box">
                            <input class="edit-btn btn_save" type="submit" value = "Save">
                            <a class="edit-btn" href="/user_local_weather">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>

            <div class = "buttons_box">
                <div>
                    <a class="edit-btn" href="/user/edit_pw/{{this_user.id}}">Change Password</a>
                    <button id="btn_delete" class="edit-btn bg-danger">Delete Account</button>

                    <!-- <a id="btn_delete" class="edit-btn bg-danger" href="/confirm/delete/{{this_user.id}}">Delete Account</a> -->
                </div>
            </div>

        </div>

    </div>
</body>
</html>